# Sekai - æ‹ŸçœŸåœ°å›¾ç”Ÿæˆå™¨ éœ€æ±‚æ–‡æ¡£

> **é¡¹ç›®ä»£å·**: sekai (æ—¥è¯­: ä¸–ç•Œ)
> 
> **é¡¹ç›®å®šä½**: ä¸€ä¸ªèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ‹ŸçœŸåœ°å½¢ç¯å¢ƒå’Œæ”¿æ²»æ¿å—çš„äº¤äº’å¼åœ°å›¾ç¼–è¾‘å™¨

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç›®æ ‡

åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åœ°å›¾ç”Ÿæˆä¸ç¼–è¾‘å·¥å…·ï¼Œèƒ½å¤Ÿï¼š

1. **è‡ªåŠ¨ç”Ÿæˆæ‹ŸçœŸåœ°å½¢** - åŸºäºç¨‹åºåŒ–ç”Ÿæˆç®—æ³•ï¼Œåˆ›å»ºé€¼çœŸçš„åœ°å½¢ï¼ˆå±±è„‰ã€å¹³åŸã€æµ·æ´‹ã€æ²³æµç­‰ï¼‰
2. **ç”Ÿæˆæ”¿æ²»æ¿å—** - è‡ªåŠ¨åˆ’åˆ†å›½å®¶/åœ°åŒºè¾¹ç•Œï¼Œæ¨¡æ‹ŸçœŸå®çš„æ”¿æ²»åœ°ç†æ ¼å±€
3. **äº¤äº’å¼ç¼–è¾‘** - æ”¯æŒç”¨æˆ·å¯¹ç”Ÿæˆçš„åœ°å›¾è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹
4. **å¤šå¹³å°æ”¯æŒ** - åŒæ—¶æ”¯æŒæ¡Œé¢åŸç”Ÿåº”ç”¨å’Œ Web æµè§ˆå™¨è¿è¡Œ

### 1.2 æŠ€æœ¯æ¶æ„

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| ç¼–ç¨‹è¯­è¨€ | Rust | é«˜æ€§èƒ½ã€å†…å­˜å®‰å…¨ |
| GUI æ¡†æ¶ | egui / eframe | å³æ—¶æ¨¡å¼ GUIï¼Œæ”¯æŒ Web å’ŒåŸç”Ÿ |
| GPU æ¸²æŸ“ | wgpu | è·¨å¹³å°å›¾å½¢ API |
| ä¸‰è§’å‰–åˆ† | delaunator | Delaunay ä¸‰è§’å‰–åˆ†åº“ |
| Web ç¼–è¯‘ | Trunk | WASM ç¼–è¯‘ä¸æ‰“åŒ…å·¥å…· |
| å¹¶è¡Œè®¡ç®— | rayon | æ•°æ®å¹¶è¡Œè®¡ç®— |

### 1.3 é¡¹ç›®çµæ„Ÿæ¥æº

æœ¬é¡¹ç›®å‚è€ƒäº† [Fantasy Map Generator](https://github.com/Azgaar/Fantasy-Map-Generator) çš„è®¾è®¡ç†å¿µï¼Œä½†ä½¿ç”¨ Rust + GPU æ¸²æŸ“é‡æ–°å®ç°ï¼Œä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œè·¨å¹³å°èƒ½åŠ›ã€‚

---

## äºŒã€æ ¸å¿ƒæ¦‚å¿µ

### 2.1 å‡ ä½•åŸºç¡€

#### 2.1.1 ç½‘æ ¼ç³»ç»Ÿ (Grid)

åœ°å›¾çš„åŸºç¡€æ˜¯ä¸€ä¸ª**æŠ–åŠ¨ç½‘æ ¼** (Jittered Grid)ï¼š

- åœ¨è§„åˆ™ç½‘æ ¼çš„åŸºç¡€ä¸Šæ·»åŠ éšæœºåç§»ï¼Œé¿å…äººå·¥æ„Ÿ
- æ¯ä¸ªç½‘æ ¼ç‚¹ä»£è¡¨ä¸€ä¸ªæ½œåœ¨çš„ Voronoi å•å…ƒä¸­å¿ƒ
- å‚æ•°ï¼š
  - `width` / `height`: åœ°å›¾å°ºå¯¸ï¼ˆé€»è¾‘å•ä½ï¼‰
  - `spacing`: ç½‘æ ¼é—´è·ï¼Œå†³å®šå•å…ƒæ ¼å¯†åº¦
  - `jittering`: æŠ–åŠ¨å¼ºåº¦ï¼ˆé»˜è®¤ä¸º spacing çš„ 45%ï¼‰

#### 2.1.2 Delaunay ä¸‰è§’å‰–åˆ†

å°†ç½‘æ ¼ç‚¹è¿æ¥æˆä¸‰è§’å½¢ç½‘ç»œï¼š

- ä¿è¯ä»»æ„ä¸‰è§’å½¢çš„å¤–æ¥åœ†å†…ä¸åŒ…å«å…¶ä»–ç‚¹
- ä½œä¸º Voronoi å›¾çš„å¯¹å¶å›¾
- ç”¨äºåœ°å½¢é«˜åº¦æ’å€¼å’Œé‚»æ¥å…³ç³»è®¡ç®—

#### 2.1.3 Voronoi å›¾

åŸºäº Delaunay ä¸‰è§’å‰–åˆ†ç”Ÿæˆï¼š

- æ¯ä¸ª Voronoi å•å…ƒå¯¹åº”ä¸€ä¸ªç½‘æ ¼ç‚¹
- å•å…ƒè¾¹ç•Œæ˜¯ç›¸é‚»ä¸‰è§’å½¢å¤–å¿ƒçš„è¿çº¿
- å½¢æˆè‡ªç„¶ã€ä¸è§„åˆ™çš„å¤šè¾¹å½¢åŒºåŸŸ
- ä½œä¸ºåœ°å›¾çš„åŸºæœ¬åœ°ç†å•å…ƒï¼ˆCellï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Voronoi å•å…ƒç¤ºæ„å›¾              â”‚
â”‚                                         â”‚
â”‚    â•±â•²      â•±â•²      â•±â•²                   â”‚
â”‚   â•±  â•²    â•±  â•²    â•±  â•²                  â”‚
â”‚  â•± Â·  â•²  â•± Â·  â•²  â•± Â·  â•²   Â· = å•å…ƒä¸­å¿ƒ  â”‚
â”‚  â•²    â•±  â•²    â•±  â•²    â•±                 â”‚
â”‚   â•²  â•±    â•²  â•±    â•²  â•±                  â”‚
â”‚    â•²â•±      â•²â•±      â•²â•±                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æ¨¡å‹

#### 2.2.1 å•å…ƒæ ¼æ•°æ® (CellsData)

æ¯ä¸ª Voronoi å•å…ƒå­˜å‚¨çš„å±æ€§ï¼š

| å±æ€§ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `height` | u8 | é«˜åº¦å€¼ (0-255)ï¼Œå†³å®šåœ°å½¢ç±»å‹ |
| `temperature` | i8 | æ¸©åº¦ (å¾…å®ç°) |
| `precipitation` | u8 | é™æ°´é‡ (å¾…å®ç°) |
| `biome` | u16 | ç”Ÿç‰©ç¾¤è½ ID (å¾…å®ç°) |
| `state` | u16 | å›½å®¶/æ”¿æ²»å®ä½“ ID (å¾…å®ç°) |
| `culture` | u16 | æ–‡åŒ–åŒºåŸŸ ID (å¾…å®ç°) |
| `religion` | u16 | å®—æ•™åŒºåŸŸ ID (å¾…å®ç°) |
| `province` | u16 | çœä»½/è¡Œæ”¿åŒº ID (å¾…å®ç°) |

#### 2.2.2 ç‰¹å¾ç³»ç»Ÿ (Feature System)

##### å•å…ƒæ ¼ç‰¹å¾ (CellFeature)

ä½œç”¨äºä¸€ç»„ Voronoi å•å…ƒçš„ç‰¹å¾ï¼š

| ç‰¹å¾ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| `State` | å›½å®¶/æ”¿æ²»å®ä½“ | å¸å›½ã€ç‹å›½ã€å…±å’Œå›½ |
| `Culture` | æ–‡åŒ–åŒºåŸŸ | è¯­è¨€ã€ä¹ ä¿—ç›¸è¿‘çš„åŒºåŸŸ |
| `Religion` | å®—æ•™åŒºåŸŸ | ä¿¡ä»°åˆ†å¸ƒ |
| `Province` | çœä»½/è¡Œæ”¿åŒº | å›½å®¶å†…éƒ¨çš„è¡Œæ”¿åˆ’åˆ† |
| `Biome` | ç”Ÿç‰©ç¾¤è½ | æ£®æ—ã€è‰åŸã€æ²™æ¼ ã€å†»åŸ |

##### ç‚¹ç‰¹å¾ (PointFeature)

ä½œç”¨äºå•ä¸ªç‚¹çš„ç‰¹å¾ï¼š

| ç‰¹å¾ç±»å‹ | è¯´æ˜ | äººå£è§„æ¨¡ |
|---------|------|---------|
| `City` | åŸå¸‚ | > 100,000 |
| `Town` | åŸé•‡ | 10,000 - 100,000 |
| `Village` | æ‘åº„ | 1,000 - 10,000 |
| `Settlement` | å®šå±…ç‚¹ | < 1,000 |

---

## ä¸‰ã€åŠŸèƒ½éœ€æ±‚

### 3.1 åœ°å½¢ç”Ÿæˆ (Phase 1) ğŸš§

#### 3.1.1 æµ·é™†åˆ†å¸ƒ

- [ ] åŸºäºå™ªå£°å‡½æ•°ç”ŸæˆåŸºç¡€é«˜åº¦å›¾
- [ ] å®šä¹‰æµ·å¹³é¢é«˜åº¦é˜ˆå€¼
- [ ] ç”Ÿæˆå¤§é™†å’Œæµ·æ´‹çš„åŸºæœ¬è½®å»“
- [ ] æ”¯æŒå²›å±¿ç”Ÿæˆ

#### 3.1.2 åœ°å½¢èµ·ä¼

- [ ] å±±è„‰ç”Ÿæˆç®—æ³•ï¼ˆæ¿å—ç¢°æ’æ¨¡æ‹Ÿæˆ–å™ªå£°å åŠ ï¼‰
- [ ] å¹³åŸã€ä¸˜é™µã€é«˜åŸåˆ†å¸ƒ
- [ ] æµ·æ²Ÿå’Œæµ·åº•åœ°å½¢
- [ ] åœ°å½¢å¹³æ»‘å¤„ç†

#### 3.1.3 æ°´ç³»ç”Ÿæˆ

- [ ] æ²³æµç”Ÿæˆï¼ˆä»é«˜å¤„å‘ä½å¤„æµåŠ¨ï¼‰
- [ ] æ¹–æ³Šç”Ÿæˆï¼ˆå‡¹é™·åœ°å½¢ç§¯æ°´ï¼‰
- [ ] ä¸‰è§’æ´²å’Œæ²³å£
- [ ] ç€‘å¸ƒå’Œæ€¥æµ

### 3.2 æ°”å€™ç³»ç»Ÿ (Phase 2)

#### 3.2.1 æ¸©åº¦åˆ†å¸ƒ

- [ ] çº¬åº¦å¯¹æ¸©åº¦çš„å½±å“
- [ ] æµ·æ‹”å¯¹æ¸©åº¦çš„å½±å“
- [ ] æ´‹æµå¯¹æ²¿æµ·æ¸©åº¦çš„å½±å“
- [ ] å­£èŠ‚æ€§æ¸©åº¦å˜åŒ–

#### 3.2.2 é™æ°´åˆ†å¸ƒ

- [ ] ä¿¡é£å’Œå­£é£æ¨¡å¼
- [ ] åœ°å½¢å¯¹é™æ°´çš„å½±å“ï¼ˆé›¨å½±æ•ˆåº”ï¼‰
- [ ] æ²¿æµ·ä¸å†…é™†çš„é™æ°´å·®å¼‚

#### 3.2.3 ç”Ÿç‰©ç¾¤è½

åŸºäºæ¸©åº¦å’Œé™æ°´è‡ªåŠ¨ç¡®å®šï¼š

| ç”Ÿç‰©ç¾¤è½ | æ¸©åº¦ | é™æ°´ |
|---------|------|------|
| çƒ­å¸¦é›¨æ— | é«˜ | é«˜ |
| çƒ­å¸¦è‰åŸ | é«˜ | ä¸­ |
| æ²™æ¼  | é«˜/ä½ | ä½ |
| æ¸©å¸¦æ£®æ— | ä¸­ | ä¸­-é«˜ |
| æ¸©å¸¦è‰åŸ | ä¸­ | ä½-ä¸­ |
| é’ˆå¶æ— | ä½ | ä¸­ |
| è‹”åŸ | æä½ | ä½ |
| å†°åŸ | æä½ | ä»»æ„ |

### 3.3 æ”¿æ²»æ¿å—ç”Ÿæˆ (Phase 3)

#### 3.3.1 æ–‡åŒ–åŒºåŸŸ

- [ ] åŸºäºåœ°ç†éš”ç¦»ï¼ˆå±±è„‰ã€æ²³æµã€æµ·æ´‹ï¼‰åˆ’åˆ†æ–‡åŒ–åŒº
- [ ] æ–‡åŒ–æ‰©æ•£æ¨¡æ‹Ÿ
- [ ] æ–‡åŒ–èåˆä¸è¾¹ç•Œè¿‡æ¸¡

#### 3.3.2 å›½å®¶ç”Ÿæˆ

- [ ] åˆå§‹å›½å®¶ç§å­ç‚¹æ”¾ç½®
- [ ] å›½å®¶æ‰©å¼ æ¨¡æ‹Ÿï¼ˆè€ƒè™‘åœ°å½¢ã€äººå£ã€èµ„æºï¼‰
- [ ] è¾¹ç•Œç¨³å®šåŒ–
- [ ] é£åœ°å’ŒåŒ…å›´åœ°å¤„ç†

#### 3.3.3 è¡Œæ”¿åŒºåˆ’

- [ ] çœä»½è‡ªåŠ¨åˆ’åˆ†
- [ ] é¦–éƒ½å’Œä¸»è¦åŸå¸‚ç¡®å®š
- [ ] è¾¹å¢ƒåŸé•‡æ ‡è®°

### 3.4 åŸé•‡ç³»ç»Ÿ (Phase 4)

#### 3.4.1 å®šå±…ç‚¹ç”Ÿæˆ

- [ ] åŸºäºèµ„æºã€æ°´æºã€è´¸æ˜“è·¯çº¿æ”¾ç½®åŸå¸‚
- [ ] äººå£åˆ†å¸ƒæ¨¡æ‹Ÿ
- [ ] åŸå¸‚è§„æ¨¡åˆ†çº§

#### 3.4.2 é“è·¯ç½‘ç»œ

- [ ] åŸå¸‚é—´é“è·¯è¿æ¥
- [ ] è´¸æ˜“è·¯çº¿
- [ ] æ¸¯å£å’Œèˆªçº¿

### 3.5 åœ°å›¾æ¸²æŸ“ (å½“å‰è¿›åº¦ âœ…)

#### 3.5.1 åŸºç¡€æ¸²æŸ“ âœ…

- [x] ç½‘æ ¼ç‚¹æ¸²æŸ“
- [x] Delaunay ä¸‰è§’å‰–åˆ†çº¿æ¡†æ¸²æŸ“
- [x] Voronoi è¾¹ç•Œæ¸²æŸ“
- [x] GPU åŠ é€Ÿæ¸²æŸ“ (wgpu)
- [x] ç€è‰²å™¨ (WGSL)

#### 3.5.2 å›¾å±‚ç³»ç»Ÿ

- [ ] å¤šå›¾å±‚æ¸²æŸ“æ¶æ„
- [ ] å›¾å±‚å¯è§æ€§æ§åˆ¶
- [ ] å›¾å±‚é€æ˜åº¦
- [ ] å›¾å±‚æ¸²æŸ“é¡ºåº

#### 3.5.3 åœ°å½¢å¯è§†åŒ–

- [ ] é«˜åº¦å›¾ç€è‰²
- [ ] ç­‰é«˜çº¿æ¸²æŸ“
- [ ] å±±ä½“é˜´å½±
- [ ] æ°´åŸŸç€è‰²

#### 3.5.4 æ”¿æ²»åœ°å›¾å¯è§†åŒ–

- [ ] å›½å®¶è¾¹ç•Œçº¿
- [ ] å›½å®¶å¡«å……è‰²
- [ ] çœä»½è¾¹ç•Œ
- [ ] åŸå¸‚å›¾æ ‡å’Œåç§°

### 3.6 äº¤äº’åŠŸèƒ½ (å½“å‰è¿›åº¦ âœ…)

#### 3.6.1 ç”»å¸ƒæ“ä½œ âœ…

- [x] å¹³ç§» (Pan) - ç©ºæ ¼é”® + æ‹–æ‹½ æˆ– æ»šè½®
- [x] ç¼©æ”¾ (Zoom) - é¼ æ ‡æ»šè½® / è§¦æ§æ¿æåˆ
- [x] ç¼©æ”¾é™åˆ¶ (0.1x - 100x)

#### 3.6.2 ç¼–è¾‘å·¥å…· (å¾…å®ç°)

- [ ] ç¬”åˆ·å·¥å…· - ç»˜åˆ¶åœ°å½¢
- [ ] æ©¡çš®æ“¦ - åˆ é™¤åœ°å½¢
- [ ] é€‰æ‹©å·¥å…· - é€‰ä¸­å•å…ƒæ ¼
- [ ] å¡«å……å·¥å…· - åŒºåŸŸå¡«å……

#### 3.6.3 ä¿¡æ¯æŸ¥çœ‹

- [ ] æ‚¬åœæ˜¾ç¤ºå•å…ƒæ ¼ä¿¡æ¯
- [ ] ç‚¹å‡»é€‰ä¸­å•å…ƒæ ¼è¯¦æƒ…
- [ ] åæ ‡æ˜¾ç¤º

---

## å››ã€UI è®¾è®¡éœ€æ±‚

### 4.1 ä¸»ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [File] [Edit] [View] [Generate] [Help]    ğŸŒ“ ä¸»é¢˜åˆ‡æ¢  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                         â”‚
â”‚   å·¥å…·é¢æ¿   â”‚                                         â”‚
â”‚   --------   â”‚                                         â”‚
â”‚   ğŸ–Œï¸ ç¬”åˆ·    â”‚                                         â”‚
â”‚   ğŸ§½ æ©¡çš®    â”‚           åœ° å›¾ ç”» å¸ƒ                   â”‚
â”‚   ğŸ”² é€‰æ‹©    â”‚                                         â”‚
â”‚   ğŸª£ å¡«å……    â”‚                                         â”‚
â”‚              â”‚                                         â”‚
â”‚   --------   â”‚                                         â”‚
â”‚   å›¾å±‚åˆ—è¡¨   â”‚                                         â”‚
â”‚   â˜‘ åœ°å½¢    â”‚                                         â”‚
â”‚   â˜‘ æ”¿æ²»    â”‚                                         â”‚
â”‚   â˜‘ åŸå¸‚    â”‚                                         â”‚
â”‚              â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€æ : åæ ‡ (x, y) | ç¼©æ”¾ 100% | é€‰ä¸­: Cell #1234    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ç”Ÿæˆé…ç½®é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ºï¸ åœ°å›¾ç”Ÿæˆè®¾ç½®                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åœ°å›¾å°ºå¯¸                        â”‚
â”‚   å®½åº¦: [____2000____] px       â”‚
â”‚   é«˜åº¦: [____1000____] px       â”‚
â”‚                                 â”‚
â”‚ ç½‘æ ¼å¯†åº¦                        â”‚
â”‚   é—´è·: [_____10_____] px       â”‚
â”‚   é¢„ä¼°å•å…ƒæ ¼: ~20,000           â”‚
â”‚                                 â”‚
â”‚ åœ°å½¢è®¾ç½®                        â”‚
â”‚   æµ·é™†æ¯”ä¾‹: [====â—====] 40%     â”‚
â”‚   å±±åœ°æ¯”ä¾‹: [==â—======] 20%     â”‚
â”‚                                 â”‚
â”‚ ç§å­å€¼                          â”‚
â”‚   [________12345________] ğŸ²    â”‚
â”‚                                 â”‚
â”‚        [  ç”Ÿæˆåœ°å›¾  ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€æ€§èƒ½éœ€æ±‚

### 5.1 æ¸²æŸ“æ€§èƒ½

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|-------|------|
| å¸§ç‡ | â‰¥ 60 FPS | æ­£å¸¸äº¤äº’æƒ…å†µä¸‹ |
| å•å…ƒæ ¼æ•°é‡ | æ”¯æŒ 50,000+ | ä¸æ˜æ˜¾å¡é¡¿ |
| åˆå§‹åŠ è½½ | < 3 ç§’ | åŒ…å«åœ°å›¾ç”Ÿæˆ |

### 5.2 å†…å­˜ä½¿ç”¨

| åœºæ™¯ | é¢„æœŸå†…å­˜ |
|------|---------|
| 10,000 å•å…ƒæ ¼ | < 50 MB |
| 50,000 å•å…ƒæ ¼ | < 200 MB |
| 100,000 å•å…ƒæ ¼ | < 500 MB |

### 5.3 ä¼˜åŒ–ç­–ç•¥

- [x] è§†å£è£å‰ª - åªæ¸²æŸ“å¯è§åŒºåŸŸçš„å‡ ä½•ä½“
- [x] GPU åŠ é€Ÿ - ä½¿ç”¨ wgpu è¿›è¡Œæ¸²æŸ“
- [x] å¹¶è¡Œè®¡ç®— - ä½¿ç”¨ rayon åŠ é€Ÿ CPU è®¡ç®—
- [ ] LOD (Level of Detail) - ç¼©å°æ—¶å‡å°‘ç»†èŠ‚
- [ ] ç©ºé—´ç´¢å¼• - åŠ é€Ÿå•å…ƒæ ¼æŸ¥è¯¢

---

## å…­ã€é¡¹ç›®ç»“æ„

```
sekai/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ lib.rs               # åº“å…¥å£
â”‚   â”œâ”€â”€ app.rs               # ä¸»åº”ç”¨ç»“æ„
â”‚   â”‚
â”‚   â”œâ”€â”€ delaunay/            # Delaunay ä¸‰è§’å‰–åˆ†
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ delaunay.rs      # ä¸‰è§’å‰–åˆ†ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ voronoi.rs       # Voronoi å›¾ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ triangle.rs      # ä¸‰è§’å½¢æ•°æ®ç»“æ„
â”‚   â”‚   â””â”€â”€ utils.rs         # å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ gpu/                 # GPU æ¸²æŸ“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ canvas_uniform.rs
â”‚   â”‚   â”œâ”€â”€ map_renderer.rs
â”‚   â”‚   â”œâ”€â”€ points_renderer.rs
â”‚   â”‚   â”œâ”€â”€ delaunay/        # Delaunay æ¸²æŸ“
â”‚   â”‚   â””â”€â”€ voronoi/         # Voronoi æ¸²æŸ“
â”‚   â”‚
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ map/
â”‚   â”‚   â”‚   â”œâ”€â”€ grid.rs      # ç½‘æ ¼ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ system.rs    # åœ°å›¾ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ cells_data.rs # å•å…ƒæ ¼æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ feature.rs   # ç‰¹å¾ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ map_layer.rs     # å›¾å±‚æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ map_layer/           # å›¾å±‚å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ layer_def.rs     # å›¾å±‚ trait
â”‚   â”‚
â”‚   â”œâ”€â”€ resource/            # èµ„æºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ resource_impl.rs # çº¿ç¨‹å®‰å…¨èµ„æº
â”‚   â”‚
â”‚   â””â”€â”€ ui/                  # UI ç»„ä»¶
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ canvas/          # ç”»å¸ƒç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ canvas.rs
â”‚       â”‚   â”œâ”€â”€ state.rs     # ç”»å¸ƒçŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ widget_impl.rs
â”‚       â”‚   â””â”€â”€ input/       # è¾“å…¥å¤„ç†
â”‚       â””â”€â”€ map/             # åœ°å›¾ UI
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ shaders/             # GPU ç€è‰²å™¨
â”‚       â”œâ”€â”€ points.wgsl
â”‚       â”œâ”€â”€ delaunay.wgsl
â”‚       â””â”€â”€ voronoi.wgsl
â”‚
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”‚   â””â”€â”€ REQUIREMENTS.md      # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ benches/                 # æ€§èƒ½æµ‹è¯•
â”‚   â””â”€â”€ delaunay.rs
â”‚
â”œâ”€â”€ Cargo.toml               # ä¾èµ–é…ç½®
â”œâ”€â”€ Trunk.toml               # Web æ„å»ºé…ç½®
â””â”€â”€ README.md
```

---

## ä¸ƒã€å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¡†æ¶ âœ… (å½“å‰)

- [x] é¡¹ç›®åˆå§‹åŒ–
- [x] egui + wgpu é›†æˆ
- [x] ç½‘æ ¼ç‚¹ç”Ÿæˆ
- [x] Delaunay ä¸‰è§’å‰–åˆ†
- [x] Voronoi å›¾ç”Ÿæˆ
- [x] GPU æ¸²æŸ“ç®¡çº¿
- [x] ç”»å¸ƒå¹³ç§»/ç¼©æ”¾

### Phase 2: åœ°å½¢ç”Ÿæˆ (è¿›è¡Œä¸­)

- [ ] é«˜åº¦å›¾ç”Ÿæˆç®—æ³•
- [ ] æµ·é™†åˆ†å¸ƒ
- [ ] é«˜åº¦ç€è‰²æ¸²æŸ“
- [ ] æ°´ç³»ç”Ÿæˆ

### Phase 3: æ°”å€™ä¸ç”Ÿç‰©ç¾¤è½

- [ ] æ¸©åº¦è®¡ç®—
- [ ] é™æ°´è®¡ç®—
- [ ] ç”Ÿç‰©ç¾¤è½åˆ†é…
- [ ] ç”Ÿç‰©ç¾¤è½å¯è§†åŒ–

### Phase 4: æ”¿æ²»åœ°ç†

- [ ] æ–‡åŒ–åŒºåŸŸç”Ÿæˆ
- [ ] å›½å®¶ç”Ÿæˆ
- [ ] çœä»½åˆ’åˆ†
- [ ] è¾¹ç•Œæ¸²æŸ“

### Phase 5: åŸé•‡ä¸è·¯ç½‘

- [ ] åŸå¸‚æ”¾ç½®ç®—æ³•
- [ ] äººå£åˆ†å¸ƒ
- [ ] é“è·¯ç½‘ç»œ
- [ ] æ ‡æ³¨ç³»ç»Ÿ

### Phase 6: ç¼–è¾‘åŠŸèƒ½

- [ ] ç¬”åˆ·å·¥å…·
- [ ] é€‰æ‹©å·¥å…·
- [ ] æ’¤é”€/é‡åš
- [ ] å¯¼å‡ºåŠŸèƒ½

---

## å…«ã€å‚è€ƒèµ„æ–™

### 8.1 ç®—æ³•å‚è€ƒ

- [Polygonal Map Generation](http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation/) - Amit Patel
- [Fantasy Map Generator](https://github.com/Azgaar/Fantasy-Map-Generator) - Azgaar
- [Procedural World Generation](https://www.redblobgames.com/) - Red Blob Games

### 8.2 æŠ€æœ¯æ–‡æ¡£

- [egui æ–‡æ¡£](https://docs.rs/egui)
- [wgpu æ–‡æ¡£](https://docs.rs/wgpu)
- [delaunator-rs](https://docs.rs/delaunator)

---

## ä¹ã€æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | è¯´æ˜ |
|------|------|------|
| å•å…ƒæ ¼ | Cell | Voronoi å›¾ä¸­çš„ä¸€ä¸ªå¤šè¾¹å½¢åŒºåŸŸ |
| ä¸‰è§’å‰–åˆ† | Triangulation | å°†ç‚¹é›†åˆ’åˆ†ä¸ºä¸é‡å ä¸‰è§’å½¢çš„è¿‡ç¨‹ |
| å¤–å¿ƒ | Circumcenter | ä¸‰è§’å½¢å¤–æ¥åœ†çš„åœ†å¿ƒ |
| ç”Ÿç‰©ç¾¤è½ | Biome | å…·æœ‰ç›¸ä¼¼æ°”å€™å’Œç”Ÿæ€ç‰¹å¾çš„åŒºåŸŸ |
| å›¾å±‚ | Layer | åœ°å›¾çš„ä¸€ä¸ªå¯è§†åŒ–å±‚çº§ |
| æŠ–åŠ¨ | Jittering | å‘è§„åˆ™ç½‘æ ¼æ·»åŠ éšæœºåç§» |

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*æœ€åæ›´æ–°: 2026-01-11*
